import { Callout, Tabs } from "nextra/components";

# Connection Commands

## Invalidate all connections

Invalidates all user sessions in all rooms. Active clients will immediately
try to reconnect and auth.

<Callout emoji="ðŸ”‘">
  API key permission: `connections:invalidate`
</Callout>

### Request

```http
POST https://api.reflect-server.net/v1/apps/{app-id}/connections/all:invalidate
```

### Response

<Tabs items={['200']}>
<Tabs.Tab>

```typescript
type InvalidateConnectionsResult = {};
```

Full response type: [`SuccessResponse<InvalidateConnectionsResult>`](overview#200)

</Tabs.Tab>
</Tabs>

## Invalidate room connections

Invalidates all user sessions in a room. Affected active clients will immediately
try to reconnect and auth.

<Callout emoji="ðŸ”‘">
  API key permission: `connections:invalidate`
</Callout>

### Request

```http
POST https://api.reflect-server.net/v1/apps/{app-id}/connections/rooms/{uri-encoded-room-id}:invalidate
```

### Response

<Tabs items={['200', '4xx']}>
<Tabs.Tab>

```typescript
type InvalidateConnectionsResult = {};
```

Full response type: [`SuccessResponse<InvalidateConnectionsResult>`](overview#200)

</Tabs.Tab>
<Tabs.Tab>
| Code | Resource | Description         |
| :--- | :------- | :------------------ |
| 404  | `rooms`  | Room not found      |

Full response type: [ErrorResponse](overview#4xx)

</Tabs.Tab>
</Tabs>
## Invalidate user connections

Invalidates all of a user's sessions. Affected active clients will immediately
try to reconnect and auth.

<Callout emoji="ðŸ”‘">
  API key permission: `connections:invalidate`
</Callout>

### Request

```http
POST https://api.reflect-server.net/v1/apps/{app-id}/connections/user/{uri-encoded-user-id}:invalidate
```

### Response

<Tabs items={['200']}>
<Tabs.Tab>

```typescript
type InvalidateConnectionsResult = {};
```

Full response type: [`SuccessResponse<InvalidateConnectionsResult>`](overview#200)

</Tabs.Tab>
</Tabs>
